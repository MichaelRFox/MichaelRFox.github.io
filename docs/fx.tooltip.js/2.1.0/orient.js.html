<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>orient.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Tip.html">Tip</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Tip.html#content">content</a></li><li data-type='method' style='display: none;'><a href="Tip.html#orientation">orientation</a></li><li data-type='method' style='display: none;'><a href="Tip.html#preferredOrientation">preferredOrientation</a></li><li data-type='method' style='display: none;'><a href="Tip.html#autoPosition">autoPosition</a></li><li data-type='method' style='display: none;'><a href="Tip.html#autoSize">autoSize</a></li><li data-type='method' style='display: none;'><a href="Tip.html#mousePoint">mousePoint</a></li><li data-type='method' style='display: none;'><a href="Tip.html#trackMouse">trackMouse</a></li><li data-type='method' style='display: none;'><a href="Tip.html#cursor">cursor</a></li><li data-type='method' style='display: none;'><a href="Tip.html#font">font</a></li><li data-type='method' style='display: none;'><a href="Tip.html#foregroundColor">foregroundColor</a></li><li data-type='method' style='display: none;'><a href="Tip.html#backgroundColor">backgroundColor</a></li><li data-type='method' style='display: none;'><a href="Tip.html#backgroundOpacity">backgroundOpacity</a></li><li data-type='method' style='display: none;'><a href="Tip.html#padding">padding</a></li><li data-type='method' style='display: none;'><a href="Tip.html#borderRadius">borderRadius</a></li><li data-type='method' style='display: none;'><a href="Tip.html#boxShadow">boxShadow</a></li><li data-type='method' style='display: none;'><a href="Tip.html#transitionVisible">transitionVisible</a></li><li data-type='method' style='display: none;'><a href="Tip.html#transitionHidden">transitionHidden</a></li><li data-type='method' style='display: none;'><a href="Tip.html#arrowSize">arrowSize</a></li><li data-type='method' style='display: none;'><a href="Tip.html#width">width</a></li><li data-type='method' style='display: none;'><a href="Tip.html#maxWidth">maxWidth</a></li><li data-type='method' style='display: none;'><a href="Tip.html#minWidth">minWidth</a></li><li data-type='method' style='display: none;'><a href="Tip.html#height">height</a></li><li data-type='method' style='display: none;'><a href="Tip.html#maxHeight">maxHeight</a></li><li data-type='method' style='display: none;'><a href="Tip.html#minHeight">minHeight</a></li><li data-type='method' style='display: none;'><a href="Tip.html#remove">remove</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-fxTip.html">fxTip</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-fxTip.html#~create">create</a></li><li data-type='method' style='display: none;'><a href="module-fxTip.html#~remove">remove</a></li></ul></li><li><a href="module-index.html">index</a></li><li><a href="module-init.html">init</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-init.html#~setup">setup</a></li><li data-type='method' style='display: none;'><a href="module-init.html#~closeDown">closeDown</a></li></ul></li><li><a href="module-mouse.html">mouse</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mouse.html#~getMouseCoordinates">getMouseCoordinates</a></li><li data-type='method' style='display: none;'><a href="module-mouse.html#~suspend">suspend</a></li></ul></li><li><a href="module-options.html">options</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-options.html#~applyOptions">applyOptions</a></li></ul></li><li><a href="module-orient.html">orient</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-orient.html#~orient">orient</a></li><li data-type='method' style='display: none;'><a href="module-orient.html#~optimumOrientation">optimumOrientation</a></li></ul></li><li><a href="module-style.html">style</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-style.html#~getRule">getRule</a></li><li data-type='method' style='display: none;'><a href="module-style.html#~getRuleIndex">getRuleIndex</a></li></ul></li><li><a href="module-tips.html">tips</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-tips.html#~getTipByElementId">getTipByElementId</a></li><li data-type='method' style='display: none;'><a href="module-tips.html#~sizeTip">sizeTip</a></li></ul></li><li><a href="module-utils.html">utils</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils.html#~getElementCoordinates">getElementCoordinates</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~hexToRgb">hexToRgb</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~parseColor">parseColor</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~parseSize">parseSize</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~checkBoolean">checkBoolean</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~checkFontFamily">checkFontFamily</a></li><li data-type='method' style='display: none;'><a href="module-utils.html#~checkCSS">checkCSS</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="module-fxTip.html#~event:detectTargetRemoval">detectTargetRemoval</a></li><li><a href="module-mouse.html#~event:mouseover">mouseover</a></li><li><a href="module-mouse.html#~event:mousemove">mousemove</a></li><li><a href="module-mouse.html#~event:mouseout">mouseout</a></li><li><a href="module-utils.html#~event:windowResized">windowResized</a></li></ul><h3>Global</h3><ul><li><a href="global.html#targetTimer">targetTimer</a></li><li><a href="global.html#sheet">sheet</a></li><li><a href="global.html#rules">rules</a></li><li><a href="global.html#ttDiv">ttDiv</a></li><li><a href="global.html#ttContainer">ttContainer</a></li><li><a href="global.html#beforeRule">beforeRule</a></li><li><a href="global.html#afterRule">afterRule</a></li><li><a href="global.html#targetRule">targetRule</a></li><li><a href="global.html#set">set</a></li><li><a href="global.html#pseudoDiv">pseudoDiv</a></li><li><a href="global.html#mouseX">mouseX</a></li><li><a href="global.html#mouseY">mouseY</a></li><li><a href="global.html#tips">tips</a></li><li><a href="global.html#tipsIndex">tipsIndex</a></li><li><a href="global.html#windowWidth">windowWidth</a></li><li><a href="global.html#windowHeight">windowHeight</a></li><li><a href="global.html#aspectRatio">aspectRatio</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">orient.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module orient */

import {ttDiv, beforeRule, afterRule} from './init.js';
import {windowHeight, windowWidth, getElementCoordinates} from './utils.js';

/**
 * @function orient
 * @desc Sets the orientation [left | right | top | bottom] of the tooltip relative to the HTML element with which it is associated.
 * @param {string} targetElement The unique id of the HTML element that owns the tooltip.
 * @param {Tip} target The object containing all of the current tooltip's options and content.
 */
export function orient (targetElement, target) {
    
    let targetCoordinates = getElementCoordinates(targetElement);
    let top;
    let left;
    let verticalAdjust;
    let horizontalAdjust;
    let sizeAdjust;

    let adjustVertical = function (top) {
        let topAdjust = top;
        let arrowAdjust = ttDiv.offsetHeight / 2;

        if (top &lt; 0) { 
            topAdjust = 0;
            arrowAdjust = Math.max((target.arrowSize()) + target.borderRadius(), top + (ttDiv.offsetHeight / 2));
        } else if (top + ttDiv.offsetHeight > windowHeight) {
            topAdjust = windowHeight - ttDiv.offsetHeight;
            arrowAdjust = Math.min(ttDiv.offsetHeight - target.borderRadius() - target.arrowSize(), (ttDiv.offsetHeight / 2) +  top - topAdjust);
        };

        return {topAdjust: Math.round(topAdjust), arrowAdjust: Math.round(arrowAdjust)};
    }

    let adjustHorizontal = function (left) {
        let leftAdjust = left;
        let arrowAdjust = ttDiv.offsetWidth / 2;

        if (left &lt; 0) { 
            leftAdjust = 0;
            arrowAdjust = Math.max((target.arrowSize()) + target.borderRadius(), left + (ttDiv.offsetWidth / 2));
        } else if (left + ttDiv.offsetWidth > windowWidth) {
            leftAdjust = windowWidth - ttDiv.offsetWidth;
            arrowAdjust = Math.min(ttDiv.offsetWidth - target.borderRadius() - target.arrowSize(), (ttDiv.offsetWidth / 2) +  left - leftAdjust);
        };

        return {leftAdjust: Math.round(leftAdjust), arrowAdjust: Math.round(arrowAdjust)};
    }

    switch (target.orientation()) {
        case 'top': {
            top = targetCoordinates.top  - target.arrowSize() - ttDiv.offsetHeight;
            if (top &lt; 0) {
                beforeRule.height = Math.round((ttDiv.offsetHeight + top - target.arrowSize())) + 'px';
                top = 0;
            };
            left = (targetCoordinates.width / 2) + targetCoordinates.left - (ttDiv.offsetWidth / 2);
            horizontalAdjust = adjustHorizontal(left);

            beforeRule.top = Math.round(top) + 'px';
            beforeRule.left = horizontalAdjust.leftAdjust + 'px';

            afterRule.top = '99.5%';    //  '100%';
            afterRule.left = horizontalAdjust.arrowAdjust + 'px';
            afterRule.bottom = '';
            afterRule.right = '';   
            afterRule.marginLeft = -target.arrowSize() + 'px';
            afterRule.marginTop = '';
            afterRule.borderColor = target.backgroundColor() + ' transparent transparent transparent';
            break;
        };
        case 'bottom': {
            top = targetCoordinates.top + targetCoordinates.height + target.arrowSize();
            sizeAdjust = windowHeight - (ttDiv.offsetHeight + top + target.arrowSize());
            beforeRule.height = (sizeAdjust &lt; 0) ? (ttDiv.offsetHeight + sizeAdjust) + 'px' : beforeRule.height;
            left = (targetCoordinates.width / 2) + targetCoordinates.left - (ttDiv.offsetWidth / 2);
            horizontalAdjust = adjustHorizontal(left);
            
            beforeRule.top = Math.round(top) + 'px'; 
            beforeRule.left = horizontalAdjust.leftAdjust + 'px'; 

            afterRule.top = '';
            afterRule.left = horizontalAdjust.arrowAdjust + 'px';
            afterRule.bottom = '99.5%'; //'100%';
            afterRule.right = '';
            afterRule.marginLeft = -target.arrowSize() + 'px';
            afterRule.marginTop = '';
            afterRule.borderColor = 'transparent transparent ' + target.backgroundColor() + ' transparent';
            break;
        };
        case 'left': {
            top =  (targetCoordinates.height / 2) + targetCoordinates.top - (ttDiv.offsetHeight / 2);
            left =  targetCoordinates.left - ttDiv.offsetWidth - target.arrowSize();
            if (left &lt; 0) {
                beforeRule.width = (ttDiv.offsetWidth + left) + 'px';
                left = 0;
            };
            verticalAdjust = adjustVertical(top);
            
            beforeRule.top = verticalAdjust.topAdjust + 'px';
            beforeRule.left = Math.round(left) + 'px';

            afterRule.top = verticalAdjust.arrowAdjust + 'px';
            afterRule.left = '99.5%';   //'100%';
            afterRule.bottom = '';
            afterRule.right = '';
            afterRule.marginLeft = '';
            afterRule.marginTop = -target.arrowSize() + 'px';
            afterRule.borderColor = 'transparent transparent transparent ' + target.backgroundColor();
            break;
        };
        case 'right': {
            top = (targetCoordinates.height / 2) + targetCoordinates.top - (ttDiv.offsetHeight / 2);
            left = targetCoordinates.left + targetCoordinates.width + target.arrowSize();
            sizeAdjust = windowWidth - (ttDiv.offsetWidth + left + target.arrowSize());
            beforeRule.width = (sizeAdjust &lt; 0) ? (ttDiv.offsetWidth + sizeAdjust) + 'px' : beforeRule.width;
            verticalAdjust = adjustVertical(top);
            
            beforeRule.top = verticalAdjust.topAdjust + 'px'; 
            beforeRule.left = Math.round(left) + 'px';

            afterRule.top = verticalAdjust.arrowAdjust + 'px';
            afterRule.left = '';
            afterRule.bottom = '';
            afterRule.right = '99.5%';  //'100%';
            afterRule.marginLeft = '';
            afterRule.marginTop = -target.arrowSize() + 'px';
            afterRule.borderColor = 'transparent ' + target.backgroundColor() + ' transparent transparent';
            break;
        };
    };
}

/**
 * @function optimumOrientation
 * @desc  If autoPosition is set to true, the preferredOrientation setting will be honored unless there is insufficient viewport space.
 * in this case, the position with the most available space will be used.
 * @param {string} targetElement The unique id of the HTML element that owns the tooltip.
 * @param {Tip} target The object containing all of the current tooltip's options and content.
 * @returns {string} One of ['left' | 'right' | 'top' | 'bottom']
 */
export function optimumOrientation  (targetElement, target) {

    let elementCoordinates = getElementCoordinates(targetElement);
    let elementCenterH = elementCoordinates.left + (elementCoordinates.width / 2);
    let elementCenterV = elementCoordinates.top + (elementCoordinates.height / 2);
    
    let leftSpacing = elementCenterH - (ttDiv.offsetWidth / 2);
    let rightSpacing = windowWidth - elementCenterH - (ttDiv.offsetWidth / 2); //check this
    let topSpacing = elementCenterV - (ttDiv.offsetHeight / 2);
    let bottomSpacing = windowHeight - elementCenterV - (ttDiv.offsetHeight / 2);

    let leftMargin = elementCoordinates.left - target.arrowSize() - ttDiv.offsetWidth;
    let rightMargin = windowWidth - ttDiv.offsetWidth - target.arrowSize() - elementCoordinates.left - elementCoordinates.width;
    let topMargin = elementCoordinates.top - target.arrowSize() - ttDiv.offsetHeight;
    let bottomMargin = windowHeight - ttDiv.offsetHeight - target.arrowSize() - elementCoordinates.top - elementCoordinates.height ;

    let leftValue = Math.min(topSpacing, bottomSpacing, leftMargin);
    let rightValue = Math.min(topSpacing, bottomSpacing, rightMargin);
    let topValue = Math.min(leftSpacing, rightSpacing, topMargin);
    let bottomValue = Math.min(leftSpacing, rightSpacing, bottomMargin);

    switch (target.preferredOrientation()) {
        case 'left': { if (leftValue >= 0) return 'left'; break};
        case 'right': { if (rightValue >= 0) return 'right'; break};
        case 'top': { if (topValue >= 0) return 'top'; break};
        case 'bottom': { if (bottomValue >= 0) return 'bottom'; break};
    };

    if (leftValue &lt; 0 &amp;&amp; rightValue &lt; 0  &amp;&amp; topValue &lt; 0 &amp;&amp; bottomValue &lt; 0) {
        leftValue += elementCoordinates.height;
        rightValue += elementCoordinates.height;
        topValue += elementCoordinates.width;
        bottomValue += elementCoordinates.width;
    };

    let maxValue = Math.max(leftValue, rightValue, topValue, bottomValue);
    switch (true) {
        case leftValue == maxValue: return 'left';
        case rightValue == maxValue: return 'right';
        case topValue == maxValue: return 'top';
        case bottomValue == maxValue: return 'bottom';
    };

}</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Wed Oct 06 2021 08:43:51 GMT-0400 (Eastern Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
